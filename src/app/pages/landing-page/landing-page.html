<div class="landing-page">
  <div class="landing-page__intro">
    <h1 class="landing-page__intro__title">Zero Gravity, Maximum Fun!</h1>

    <div class="landing-page__intro__text">
      <p>Sign up today and step into the shoes of Israelâ€™s first imaginary astronauts!</p>
      <p>
        Connect with the crew, explore fun space challenges, and get exclusive updates on our
        mission.
      </p>
      <p>Quick, easy, and a little bit magical - your journey to the stars starts here</p>
    </div>
    <div class="landing-page__intro__sub-title">
      {{
        formType !== 'emailOnly'
          ? 'Apply today, edit your submission anytime within 3 days'
          : 'If your email is on our list , you can edit your information only within 3 days of registration'
      }}
    </div>

    @if (formType === 'new') {
    <div class="landing-page__switch-form" (click)="switchToCheckEmail()">
      <p class="landing-page__switch-form__main">Already registered?</p>
      <p class="landing-page__switch-form__sub">
        click here to update your form - only within 3 days
      </p>
    </div>
    }
  </div>

  <form
    class="landing-page__form"
    [formGroup]="registrationForm"
    [ngClass]="{ 'email-form': formType === 'emailOnly' }"
    (ngSubmit)="formType === 'new' || formType === 'edit' ? onSubmit() : onEmailSubmit()"
  >
    @if(formType !== 'emailOnly'){ @for(field of fromFields; track field.name){
    @if(field.name==='profileImage'){
    <div class="landing-page__form__profile-picture">
      <div class="landing-page__form__profile-picture__image-preview">
        <img
          class="landing-page__form__profile-picture__image-preview__picture"
          [src]="selectedImg ? selectedImg : 'assets/placeholder.png'"
          alt="Profile Picture Preview"
        />
      </div>

      <div class="landing-page__form__profile-picture__image-upload">
        <input
          class="landing-page__form__profile-picture__image-upload__input"
          [type]="field.type"
          accept="image/png, image/jpeg"
          (change)="onFileSelected($event)"
        />
      </div>
    </div>

    } @else {
    <mat-form-field appearance="outline">
      <mat-label>{{ field.label }}</mat-label>
      @if(field.type !== 'textarea'){
      <input
        matInput
        [formControlName]="field.name"
        [type]="field.type"
        [readonly]="formType === 'edit' && field.name === 'email'"
      />
      } @else {
      <textarea matInput [formControlName]="field.name"></textarea>
      } @if(getError(field.name)){
      <mat-error>{{ getError(field.name) }}</mat-error>
      }
    </mat-form-field>

    } } @if(successMessage){
    <div class="landing-page__form__success-message">{{ successMessage }}</div>
    } @if(errorMessage){
    <div class="landing-page__form__error-message">{{ errorMessage }}</div>
    }

    <div class="landing-page__form__submit-btn">
      <button
        class="landing-page__form__submit-btn__btn"
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="registrationForm.invalid"
      >
        Apply Now
      </button>
    </div>

    } @else{
    <div class="landing-page__form__only-email">
      <mat-form-field appearance="outline">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" type="text" />
      </mat-form-field>
    </div>
    @if(errorMessage){
    <div class="landing-page__form__error-message">{{ errorMessage }}</div>
    <div class="landing-page__form__register-btn">
      <button
        class="landing-page__form__register-btn_btn"
        mat-raised-button
        color="primary"
        (click)="switchToNewForm()"
      >
        Register Now
      </button>
    </div>
    }
    <div class="landing-page__form__check-btn">
      <button
        class="landing-page__form__check-btn__btn"
        mat-raised-button
        color="primary"
        type="submit"
      >
        check if exists
      </button>
    </div>
    }
  </form>
</div>
